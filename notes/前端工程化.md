#   前端工程化浅谈
##  索引
*   什么是前端工程化？
*   为什么要前端工程化？
*   前端工程化思路
*   前端工程化的实践
### 什么是前端工程化？
>   所有能降低成本，并且能提高效率的事情的总称为工程化。

#####   历史背景
web 前端近几年发展很快，在我刚进入前端领域时，`NodeJS`、`React`、`Babel`、`ES 6`、`Webpack` 等概念还属于前沿技术，面试官基本问的都是对这些技术是否有过接触，而不会问更深层次的内容，就算在应聘要求上写了相关内容，但也不会因为没接触过轻易否决面试者；然而今年，如果说不会这些技能，基本换来的都会是抱歉，前端发展速度实在很快，技术要跟在时代的前沿。
#####   前端工程化
前端由以前的切图切页面，到CSS崛起进入图文时代，再到当今社会的多媒体3D、VR、H5，发展快伴随的就是技术迭代快，以前为了业务实现而做的插件式开发模式，还有前后端混合开发模式，已经不太适用，因为项目复杂度和冗余度产生了很多问题：
*   重复造轮子
*   开发环境差异，不规范
*   开发流程不高效，不可预测
*   很难引入新技术

前端框架，前端各种解决方案就是为了解决不同时期前端问题而产出的，如 jQuery、Gulp、RequireJS 等。前端工程化的思想是软件工程中引进的，为的是让开发流程更简单规范，能够轻松应对复杂项目的各种需求，将前端开发流程规范化、标准化，降低沟通成本、时间成本，自成体系。当今前端工程化解决方案：

**客户端层**
*   Webpack / Roleup 打包的 Vue、React、Angular
*   为小程序和app端而衍生的 Weex、React Native、Taro
*   还有桌面级应用相关的 Electron、NW.js

**服务端层**
*   NodeJS

**运维层**
*   构建部署（如 pm2）
*   日志监控
### 为什么要前端工程化？
做到规范化，流程化，自动化，让开发过程更有价值：
####   规范化
1.  文档。需求文档、设计文档、系统设计、测试脑图、项目进度。
2.  工具。开发语言选型，开发工具，协同工具，测试工具，发布工具。
3.  代码规范。javascript，css，html，技术文档。
4.  质量规范。功能方便，是否可拓展，是否满足 RESTFul，是否安全性满足
####   流程化
职责明确，协作高效
目标明确的版本计划
敏捷开发
####   自动化
代码开发自动化，如代码块预存，去掉重复劳动
自动化单元测试，代码检查
API/兼容性 自动化测试
####   创新
发掘其他团队的优秀方法
实践敏捷开发
多交流，多了解新事物
### 前端工程化具体的语言、框架
工欲善其事必先利其器，先来看下前端工程化会用到哪些技术。
*   **CSS 模块化方案**：Less / Sass / Stylus / PostCss / CSS Module
*   **JS 模块化方案**：AMD / CommonJS / CMD / ES6 Modlue
*   **HTML 模板引擎**：ejs / jade / mustache / baiduTemplate（百度）/ artTemplate（腾讯）/ juicer（淘宝）/ doT / tmpl
*   **前端集成框架**：Bootstrap、Foundation
*   **MVVM框架**：AngularJS / ReactJS / VueJS / Taro / Weex / Eelectron / React Native / Wepy
*   **全家桶工具**：Vue Router / Vuex / Diva
*   **构建工具**：Webpack / Roleup / Grunt / Gulp / Yeoman
### 前端工程化的实践
####   代码优化：
*   LESS、SASS、PostCSS 自动编译
*   Autoprefixer 前缀自动补全
*   CSS 单位自动转换
*   宽高比盒子自动化
*   CSS Sprite 雪碧图合成
*   JS、CSS、HTML 压缩，切割
*   按需加载
*   懒加载
####   细节优化：
*   项目初始化，利用脚手架生成
*   eslint 手动/自动验证
*   Retina @2x & @3x 自动生成适配（vw方案实现，需要单独处理 1px 边框显示）
*   CDN 文件缓存
####   调试部署
*   监听文件变动，diff 实现自动刷新浏览器
*   hash 值自动生成
####   自动化测试
*   Mocha
####   轮子
*   优秀开源 UI 方案：ant-design、iView
*   根据业务具体需求，造可重用的轮子
####   多终端解决方案
前端的主战场是浏览器，所以先对浏览器内核做个介绍：
*   **移动端**：微信 X5 内核，iOS Webkit，Android Webkit
*   **PC 端**：Trident（IE），Gecko（FireFox），Webkit（Safari），Bink（Chrome），Presto（Opera，已放弃）

不难看出，Webkit 内核占据主要地位，另外 X5 在国内也是要重点关注的，所以基于这两个内核，各大公司都做了多端处理的解决方案，如：
*   **移动端**：Cordova，React Native，Weex，Taro
*   **桌面端**：node-webkit（NW.js）, Electron
*   **穿戴设备**：WebVR
### Node 层做的事情
####   代理转发，处理请求
1.  开发阶段，可以做到mock和真实数据平滑切换，客户端无感知；
2.  后端服务增多时，解决跨域调用，不用担心 Cookie 丢失问题；
3.  可以做响应二次封装，适用更多场景
####   模板渲染
应 SEO 和首屏渲染速度的需求，需要在服务端渲染一些权重高的页面，而 Node 层可以渲染主流框架的模板，如 Vue / React。
####   构建部署
PM2 是 node 进程管理工具，可以利用它来简化很多 node 应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，使用方法简单，json 或 命令脚本方法均可。
